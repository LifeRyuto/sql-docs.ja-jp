---
title: データベース ミラーリング モニター ([警告] ページ) | Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: high-availability
ms.topic: conceptual
f1_keywords:
- sql12.swb.dbmmonitor.warningsandalerts.f1
ms.assetid: 01936122-961d-436b-ba3c-5f79fefe5469
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.openlocfilehash: 014c0891fa3a887e781def415e68c38549bafe08
ms.sourcegitcommit: b87d36c46b39af8b929ad94ec707dee8800950f5
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 02/08/2020
ms.locfileid: "62755053"
---
# <a name="database-mirroring-monitor-warnings-page"></a>データベース ミラーリング モニター ([警告] ページ)
  データベース ミラーリングのイベントでサポートされている警告の読み取り専用の一覧と指定された警告しきい値 (存在する場合) を表示します。  
  
 **SQL Server Management Studio を使用してデータベースミラーリングを監視するには**  
  
-   [&#40;SQL Server Management Studio を開始データベースミラーリングモニター&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)  
  
## <a name="columns"></a>[列]  
 **警告**  
 しきい値を定義可能な警告には、次のものがあります。  
  
|警告|Threshold|  
|-------------|---------------|  
|**未送信のログがしきい値を超えた場合に警告する**|未送信のログが何キロバイトになると、プリンシパル サーバー インスタンスで警告を生成するかを指定します。 この警告は、キロバイト数でデータ損失の可能性を測定する場合に役立ちます。また、高パフォーマンス モードに特に関連します。 パートナーとの通信が切断されたためにミラーリングが一時停止または中断している場合は、高安全モードにも関係します。|  
|**未復元ログがしきい値を超えた場合に警告する**|復元されていないログが何キロバイトになると、ミラー サーバー インスタンスで警告を生成するかを指定します。 この警告は、キロバイト数でフェールオーバー時間を測定する場合に役立ちます。 *フェールオーバー時間*は、主に、以前のミラーサーバーが再実行キューに残っているログをロールフォワードするために必要な時間に加えて、短い時間が必要です。<br /><br /> 注: 自動フェールオーバーの場合、システムがエラーを通知するまでの時間は、フェールオーバー時間に関係ありません。<br /><br /> 詳しくは、「 [役割の交代中に発生するサービスの中断時間の算出 &#40;データベース ミラーリング&#41;](estimate-the-interruption-of-service-during-role-switching-database-mirroring.md)という処理により、一般的にプリンシパルとミラーの役割を相互交換できます。|  
|**最も古い未送信のトランザクションの経過期間がしきい値を超えた場合に警告する**|送信キュー内にトランザクションを累積できる時間 (分単位) を指定します。この時間を経過すると、プリンシパル サーバー インスタンスで警告が生成されます。 この警告は、時間でデータ損失の可能性を測定する場合に役立ちます。また、高パフォーマンス モードに特に関連します。 パートナーとの通信が切断されたためにミラーリングが一時停止または中断している場合は、高安全モードにも関係します。|  
|**[ミラーコミットのオーバーヘッドがしきい値を超えた場合に警告する。**|プリンシパル サーバーで警告を生成する前に許容されるトランザクションごとの平均遅延時間をミリ秒単位で指定します。 この遅延時間は、ミラー サーバー インスタンスによってトランザクションのログ レコードが再実行キューに書き込まれるのをプリンシパル サーバー インスタンスが待機している間、発生したオーバーヘッドの量になります。 この値は高安全モードにのみ関係します。|  
  
 **'** _<server_instance>_ **'** のしきい値  
 各警告に対して、サーバー インスタンスのいずれかに現在のユーザーが指定しているしきい値 (存在する場合) を表示します。 サーバー インスタンスの完全なインスタンス名は、対応している列見出しに表示されます。  
  
 詳細については、後の「解説」を参照してください。  
  
 **しきい値の設定**  
 このボタンをクリックして、フェールオーバー パートナーごとに 1 つの警告のしきい値を設定します。  
  
 詳細については、後の「解説」を参照してください。  
  
## <a name="remarks"></a>解説  
 サーバー インスタンスの情報が現在表示できない場合、対応している **['<server_instance>' でのしきい値]** 列のセルには、背景が灰色のウォーターマーク テキストが表示されます。 モニターがサーバーインスタンスに接続されていない場合、グリッドの各セルには、インスタンスが既定のインスタンスか名前付きインスタンスかに応じて、 _<SYSTEM_NAME>_ に接続されて**いない**か、 _<SYSTEM_NAME_ **\\** _><_ instance_name>**に**接続されていないかが表示されます。 モニターがクエリの応答を待機している場合、グリッドの各セルに **"データを待機しています..."** と表示されます。  
  
 情報を表示できる場合、各警告のセルには、指定されたしきい値が表示されるか、または " **有効になっていません**" と表示されます。  
  
 状態テーブルが更新されたときにしきい値を超えた場合、状態の行が記録される際に Windows イベント ログにイベントがログ記録されます。 既定では、モニターが動作していない場合、状態の行は 1 分ごとに記録されます。 SQL Server エージェントまたは Microsoft Management Operations Manager (MOM) などの他のプログラムを使用して、ログに記録された各種イベントの警告を構成できます。  
  
 特定のパートナーのログに記録されるイベントは、現在のロール (プリンシパルまたはミラー) によって異なります。 ただし、データベースがフェールオーバーすると警告が保持されるため、両方のパートナーに対して特定のイベントの警告しきい値を設定することをお勧めします。 適切なしきい値は、各パートナーのシステムのパフォーマンスによって異なります。  
  
> [!NOTE]  
>  
  **sp_dbmmonitorchangealert** システム ストアド プロシージャを使用して、同等のイベント (未送信のログ、未回復のログ、最も古い未送信のトランザクション、およびミラー コミットのオーバーヘッド) のしきい値を構成することもできます。 詳細については、「[sp_dbmmonitorchangealert &#40;Transact-SQL&#41;](/sql/relational-databases/system-stored-procedures/sp-dbmmonitorchangealert-transact-sql)」を参照してください。  
  
 次の表は、各警告に関連するイベント ID を示しています。  
  
|データベース ミラーリング モニターの警告|イベント名|イベント ID|  
|----------------------------------------|----------------|--------------|  
|**未送信のログがしきい値を超えた場合に警告する**|未送信のログ|32042|  
|**未復元ログがしきい値を超えた場合に警告する**|未復元のログ|32043|  
|**最も古い未送信のトランザクションの経過期間がしきい値を超えた場合に警告する**|最も古い未送信のトランザクション|32044|  
|**[ミラーコミットのオーバーヘッドがしきい値を超えた場合に警告する。**|ミラー コミットのオーバーヘッド|32045|  
  
## <a name="permissions"></a>アクセス許可  
 フル アクセスの場合、 **sysadmin** 固定サーバー ロールのメンバーシップが必要です。 
  **sysadmin** のメンバーだけが主要なパフォーマンス基準の警告しきい値を構成および表示できます。  
  
 
  **dbm_monitor** ロールのメンバーシップを使用して、 **[警告]** ページに最新の状態行のみを表示できます。  
  
## <a name="see-also"></a>参照  
 [&#40;SQL Server Management Studio を開始データベースミラーリングモニター&#41;](../database-mirroring/start-database-mirroring-monitor-sql-server-management-studio.md)   
 [データベースミラーリングの監視 &#40;SQL Server&#41;](database-mirroring-sql-server.md)   
 [データベースミラーリングセキュリティ構成ウィザード &#40;SQL Server Management Studio を開始し&#41;](start-the-configuring-database-mirroring-security-wizard.md)  
  
  
