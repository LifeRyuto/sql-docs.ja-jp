---
title: 分析レポートの作成
description: データベース実験アシスタントで分析レポートを作成する
ms.date: 01/24/2020
ms.prod: sql
ms.prod_service: dea
ms.suite: sql
ms.technology: dea
ms.tgt_pltfrm: ''
ms.topic: conceptual
author: HJToland3
ms.author: jtoland
ms.reviewer: mathoma
ms.custom: seo-lt-2019
ms.openlocfilehash: f82aba87632abea4ac5fbc8b54daa6dfd0eb5b4a
ms.sourcegitcommit: 4baa8d3c13dd290068885aea914845ede58aa840
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/13/2020
ms.locfileid: "79289840"
---
# <a name="create-analysis-reports-in-database-experimentation-assistant-sql-server"></a>データベース実験アシスタント (SQL Server) で分析レポートを作成する

両方のターゲット サーバーでソース トレースを再生した後、データベース実験アシスタント (DEA) で分析レポートを生成できます。 分析レポートは、提案された変更のパフォーマンスへの影響に関する洞察を得るために役立ちます。

## <a name="create-an-analysis-report"></a>分析レポートの作成

1. DEA で、リスト アイコンを選択し、サーバー名と認証の種類を指定し、シナリオに応じて [**接続を暗号化**する] チェック ボックスと **[サーバー証明書を信頼**する] チェック ボックスをオンまたはオフにして、[**接続**] を選択します。

   ![トレース ファイルを使用してサーバーに接続する](./media/database-experimentation-assistant-create-report/dea-connect-to-server-with-trace-files.png)

2. [**分析レポート**] 画面で、[**新しい分析レポート**] を選択します。

   ![新しい分析レポートの作成](./media/database-experimentation-assistant-create-report/dea-create-an-analysis-report.png)

3. [**新しい分析レポート**] 画面で、レポートの名前、保存場所、および [ターゲット 1] および [ターゲット 2] トレース ファイルへのパスを指定し、[**開始**] を選択します。

   ![新しい分析レポートの詳細の指定](./media/database-experimentation-assistant-create-report/dea-new-analysis-report-details.png)

   入力した情報が有効な場合は、分析レポートが作成されます。

   ![新しく作成された分析レポート](./media/database-experimentation-assistant-create-report/dea-newly-created-analysis-report.png)

      > [!NOTE]
      > 入力した情報のいずれかが無効な場合、不適切な情報を含むテキスト ボックスは赤色で強調表示されます。 必要な修正を行い、[もう一度**開始**] を選択します。

## <a name="frequently-asked-questions-about-analysis-reports"></a>分析レポートに関するよくある質問

**Q: 分析レポートには何が表示されますか?**

DEA は、統計テストを使用してワークロードを分析し、ターゲット 1 からターゲット 2 への各クエリの実行方法を決定します。 各クエリのパフォーマンスの詳細を提供します。 DEA の詳細については[、「はじめに](database-experimentation-assistant-get-started.md)」を参照してください。

**Q: 別のレポートを生成中に新しい分析レポートを作成できますか。**

いいえ。  現在、競合を防ぐために一度に生成できるレポートは 1 つだけです。 ただし、複数のキャプチャと再生を同時に実行できます。

**Q: コマンド プロンプトを使用して分析レポートを生成できますか。**

はい。 コマンド プロンプトで分析レポートを生成できます。 その後、UI でレポートを表示できます。 詳細については、「コマンド[プロンプトで実行する](database-experimentation-assistant-run-command-prompt.md)」を参照してください。

## <a name="troubleshoot-analysis-reports"></a>分析レポートのトラブルシューティング

**Q: サーバー上で分析レポートを生成および表示するには、どのようなセキュリティアクセス許可が必要ですか。**

DEA にログインしているユーザーは、分析サーバーの sysadmin 権限を持っている必要があります。 ユーザーがグループの一部である場合は、グループに sysadmin 権限があることを確認します。

|考えられるエラー|解決策|  
|---|---|  
|データベースに接続できません。 レポートを分析および表示するための sysadmin 権限があることを確認します。|サーバーまたはデータベースへのアクセス権限または sysadmin 権限がない可能性があります。 ログイン権限を確認して、もう一度お試しください。|  
|サーバー**サーバー****名にレポート名**を生成できません。 詳細については、**レポート名レポート**を確認してください。|新しいレポートを生成するために必要なシステム管理者権限がない可能性があります。 詳細なエラーを表示するには、エラーレポートを選択し、%temp%\\DEA のログを確認します。|  
|現在のユーザーには、操作を実行するために必要なアクセス許可がありません。 トレースを実行し、レポートを分析するための sysadmin 権限があることを確認します。|新しいレポートを生成するために必要なシステム管理者権限がありません。|  

**Q: SQL Server を実行しているコンピュータに接続できない**

- SQL Server を実行しているコンピュータの名前が有効であることを確認します。 確認するには、SQL Server 管理スタジオ (SSMS) を使用してサーバーに接続します。
- ファイアウォール構成が SQL Server を実行しているコンピューターへの接続をブロックしていないことを確認します。
- ユーザーが必要なユーザー権限を持っていることを確認します。

ログの詳細については、%temp%\\DEA を参照してください。 問題が解決しない場合は、製品チームに問い合わせてください。

**Q: 分析レポートを生成するとエラーが表示される**

DEA のインストール後に分析レポートを初めて生成する場合は、インターネット アクセスが必要です。 統計分析に必要なパッケージをダウンロードするには、インターネットアクセスが必要です。

レポートの作成中にエラーが発生した場合、進行状況ページには、解析生成が失敗した特定のステップが表示されます。 ログの詳細については、%temp%\\DEA を参照してください。 必要なユーザー権利を持つサーバーへの有効な接続があることを確認してから、再試行してください。 問題が解決しない場合は、製品チームに問い合わせてください。

|考えられるエラー|解決策|  
|---|---|  
|RInterop は起動時にエラーを発生しました。 RInterop ログを確認して、もう一度やり直してください。|DEA は、依存する R パッケージをダウンロードするためにインターネットアクセスを必要とします。 %temp% RInterop および\\DEA ログの RInterop\\ログを %temp% DEA で確認します。 RInterop が正しく初期化されなかった場合、または正しい R パッケージを使用せずに初期化された場合は、DEA ログの InitializeRInterop ステップの後に例外 "新しい分析レポートを生成できませんでした" が表示されることがあります。<br><br>RInterop ログには、「jsonlite パッケージが存在しない」と同様のエラーが表示されることもあります。 マシンにインターネットアクセスがない場合は、必要な jsonlite R パッケージを手動でダウンロードできます。<br><br><li>マシンのファイル システムの\\%userprofile% DEARPackages フォルダに移動します。 このフォルダは、DeA 用に R が使用するパッケージで構成されます。</li><br><li>jsonlite フォルダがインストール済みパッケージのリストに表示されない場合は、jsonlite\_1.4.zip のリリースバージョンを から[https://cran.r-project.org/web/packages/jsonlite/index.html](https://cran.r-project.org/web/packages/jsonlite/index.html)ダウンロードするには、インターネットにアクセスできるマシンが必要です。</li><br><li>DEA を実行しているコンピューターに .zip ファイルをコピーします。  jsonlite フォルダーを抽出し、%ユーザープロファイル%\\DEARPackages にコピーします。 この手順では、自動的に jsonlite パッケージを R にインストールします。フォルダーは**jsonlite**という名前にし、コンテンツは、1 つ下のレベルではなく、フォルダー内に直接配置する必要があります。</li><br><li>DEA を閉じ、再度開いて、分析を再試行してください。</li><br>RGUI を使用することもできます。 **zip からインストール****するパッケージ** > に移動します。 以前にダウンロードしたパッケージに移動してインストールします。<br><br>RInterop が初期化され、正しく設定されている場合は、RInterop ログに「依存 R パッケージ jsonlite をインストールする」が表示されます。|  
|SQL Server インスタンスに接続できない場合は、サーバー名が正しいことを確認し、ログインしているユーザーに必要なアクセス権を確認してください。|サーバーへのアクセス権限またはユーザー権限がないか、サーバー名が正しくない可能性があります。|
|RInterop プロセスがタイムアウトしました。DEA ログと RInterop ログを確認し、タスク マネージャーで RInterop プロセスを停止してから、もう一度やり直してください。<br><br>or<br><br>RInterop は障害状態です。 タスク マネージャで RInterop プロセスを停止してから、やり直してください。|%temp%\\RInterop のログを確認して、エラーを確認してください。 もう一度やり直す前に、RInterop プロセスをタスク マネージャから削除してください。 問題が解決しない場合は、製品チームに問い合わせてください。|

**Q: レポートは生成されますが、データが欠落しているように見えます**

SQL Server を実行している分析コンピューター上のデータベースを調べて、データが存在することを確認します。 分析データベースが存在することを確認し、そのテーブルを確認します。 たとえば、次のテーブルを確認してください: TblBatchesA、TblBatchesB、および TblSummaryStats。

データが存在しない場合は、データが正しくコピーされなかったか、データベースが破損している可能性があります。 一部のデータのみが欠落している場合、キャプチャまたは再生で作成されたトレース ファイルがワークロードを正確にキャプチャしていない可能性があります。 データが存在する場合は、%temp%\\DEA のログ ファイルを調べて、エラーが記録されていないか確認してください。 その後、分析レポートを生成するもう一度試してください。

より多くの質問やフィードバック? DEA ツールを使用して、左下隅のスマイリー アイコンを選択してフィードバックを送信します。

## <a name="see-also"></a>関連項目

- 分析レポートの表示方法については、「[レポートの表示](database-experimentation-assistant-view-report.md)」を参照してください。
